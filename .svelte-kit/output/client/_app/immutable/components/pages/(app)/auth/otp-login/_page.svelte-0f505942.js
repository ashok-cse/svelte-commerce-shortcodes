import{S as se,i as le,s as ae,k as N,q as X,a as j,V as me,v as W,l as T,m as P,r as S,h as f,c as B,W as _e,w as J,n as p,b as M,C as o,ab as de,x as Q,R as K,ae as ye,u as ee,f as q,t as U,y as Z,T as Pe,a4 as ke,G as Oe,aj as Ne,A as ne,a6 as Ee,af as Te,ag as xe,_ as $e,p as De,ac as Xe,ad as Se,d as he,o as Ve,g as ge}from"../../../../../chunks/index-98fbb2d4.js";import{S as Ae}from"../../../../../chunks/index-deeab894.js";import{L as Ie}from"../../../../../chunks/LazyImg-7c4ba5e2.js";import{t as be}from"../../../../../chunks/index-26fe4c17.js";import{i as Re,g as je}from"../../../../../chunks/navigation-e4b28514.js";import{P as we}from"../../../../../chunks/PrimaryButton-057a081b.js";import{t as Be}from"../../../../../chunks/index-4320d0cf.js";import{T as Ce}from"../../../../../chunks/TextboxFloating-e84430c0.js";import{c as Me}from"../../../../../chunks/cookie-universal-common-1e0fc125.js";import{p as ve}from"../../../../../chunks/api-8ad212b5.js";const Fe=!0;function Le(l){let e,t,r,a;return{c(){e=N("button"),t=X("RESEND OTP"),this.h()},l(n){e=T(n,"BUTTON",{type:!0,class:!0});var s=P(e);t=S(s,"RESEND OTP"),s.forEach(f),this.h()},h(){p(e,"type","button"),p(e,"class","font-bold text-primary-500 hover:text-primary-700 focus:outline-none")},m(n,s){M(n,e,s),o(e,t),r||(a=K(e,"click",l[8]),r=!0)},p:ne,d(n){n&&f(e),r=!1,a()}}}function qe(l){let e,t,r,a,n,s,c,d,y,u,m,V,_,$;function E(b,h){return b[2]<10?ze:Ue}let v=E(l),g=v(l);function k(b,h){return b[4]<10?Ye:He}let R=k(l),w=R(l);return{c(){e=N("div"),t=N("span"),r=X("Resend OTP in"),a=j(),n=N("p"),s=N("span"),g.c(),c=j(),d=N("span"),y=X(":"),u=j(),m=N("span"),w.c(),V=j(),_=N("span"),$=X("seconds"),this.h()},l(b){e=T(b,"DIV",{class:!0});var h=P(e);t=T(h,"SPAN",{});var x=P(t);r=S(x,"Resend OTP in"),x.forEach(f),a=B(h),n=T(h,"P",{class:!0});var A=P(n);s=T(A,"SPAN",{});var i=P(s);g.l(i),i.forEach(f),c=B(A),d=T(A,"SPAN",{});var O=P(d);y=S(O,":"),O.forEach(f),u=B(A),m=T(A,"SPAN",{});var C=P(m);w.l(C),C.forEach(f),A.forEach(f),V=B(h),_=T(h,"SPAN",{});var I=P(_);$=S(I,"seconds"),I.forEach(f),h.forEach(f),this.h()},h(){p(n,"class","flex items-center justify-center font-bold"),p(e,"class","mx-auto flex max-w-max items-center gap-1")},m(b,h){M(b,e,h),o(e,t),o(t,r),o(e,a),o(e,n),o(n,s),g.m(s,null),o(n,c),o(n,d),o(d,y),o(n,u),o(n,m),w.m(m,null),o(e,V),o(e,_),o(_,$)},p(b,h){v===(v=E(b))&&g?g.p(b,h):(g.d(1),g=v(b),g&&(g.c(),g.m(s,null))),R===(R=k(b))&&w?w.p(b,h):(w.d(1),w=R(b),w&&(w.c(),w.m(m,null)))},d(b){b&&f(e),g.d(),w.d()}}}function Ue(l){let e;return{c(){e=X(l[2])},l(t){e=S(t,l[2])},m(t,r){M(t,e,r)},p(t,r){r&4&&ee(e,t[2])},d(t){t&&f(e)}}}function ze(l){let e,t;return{c(){e=X("0"),t=X(l[2])},l(r){e=S(r,"0"),t=S(r,l[2])},m(r,a){M(r,e,a),M(r,t,a)},p(r,a){a&4&&ee(t,r[2])},d(r){r&&f(e),r&&f(t)}}}function He(l){let e;return{c(){e=X(l[4])},l(t){e=S(t,l[4])},m(t,r){M(t,e,r)},p(t,r){r&16&&ee(e,t[4])},d(t){t&&f(e)}}}function Ye(l){let e,t;return{c(){e=X("0"),t=X(l[4])},l(r){e=S(r,"0"),t=S(r,l[4])},m(r,a){M(r,e,a),M(r,t,a)},p(r,a){a&16&&ee(t,r[4])},d(r){r&&f(e),r&&f(t)}}}function Ge(l){let e;return{c(){e=X("VERIFY")},l(t){e=S(t,"VERIFY")},m(t,r){M(t,e,r)},d(t){t&&f(e)}}}function Ke(l){let e,t,r,a,n,s,c,d,y,u,m,V,_,$,E,v,g,k,R,w,b,h,x,A,i,O,C,I;function z(D,F){return(D[2]||D[4])&&(D[2]>=0||D[4]>=0)?qe:Le}let G=z(l),L=G(l);return i=new we({props:{loading:l[1],class:"w-full",type:"submit",$$slots:{default:[Ge]},$$scope:{ctx:l}}}),{c(){e=N("div"),t=N("div"),r=N("div"),a=X("Enter the OTP sent to"),n=j(),s=N("div"),c=N("b"),d=X(l[0]),y=j(),u=N("button"),m=X("Change"),V=j(),_=N("form"),$=N("div"),E=N("input"),v=j(),g=me("svg"),k=me("line"),R=j(),w=N("p"),b=X("Didn't receive the OTP?"),h=j(),x=N("div"),L.c(),A=j(),W(i.$$.fragment),this.h()},l(D){e=T(D,"DIV",{});var F=P(e);t=T(F,"DIV",{class:!0});var H=P(t);r=T(H,"DIV",{class:!0});var oe=P(r);a=S(oe,"Enter the OTP sent to"),oe.forEach(f),n=B(H),s=T(H,"DIV",{class:!0});var te=P(s);c=T(te,"B",{});var ie=P(c);d=S(ie,l[0]),ie.forEach(f),y=B(te),u=T(te,"BUTTON",{type:!0,class:!0});var fe=P(u);m=S(fe,"Change"),fe.forEach(f),te.forEach(f),H.forEach(f),V=B(F),_=T(F,"FORM",{class:!0});var Y=P(_);$=T(Y,"DIV",{class:!0});var re=P($);E=T(re,"INPUT",{type:!0,maxlength:!0,pattern:!0,autocomplete:!0,class:!0}),v=B(re),g=_e(re,"svg",{viewBox:!0,xmlns:!0,class:!0});var ce=P(g);k=_e(ce,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0,"stroke-width":!0,"stroke-dasharray":!0}),P(k).forEach(f),ce.forEach(f),re.forEach(f),R=B(Y),w=T(Y,"P",{class:!0});var ue=P(w);b=S(ue,"Didn't receive the OTP?"),ue.forEach(f),h=B(Y),x=T(Y,"DIV",{class:!0});var pe=P(x);L.l(pe),pe.forEach(f),A=B(Y),J(i.$$.fragment,Y),Y.forEach(f),F.forEach(f),this.h()},h(){p(r,"class","text-sm"),p(u,"type","button"),p(u,"class","font-bold text-blue-600 hover:text-blue-800 focus:outline-none"),p(s,"class","flex gap-2 text-xs"),p(t,"class","mb-5 flex flex-col items-center justify-center gap-1 text-center"),p(E,"type","text"),p(E,"maxlength","4"),p(E,"pattern","[0-9]*"),p(E,"autocomplete","off"),E.autofocus=!0,p(E,"class","svelte-rkwckj"),p(k,"x1","0"),p(k,"y1","0"),p(k,"x2","240"),p(k,"y2","0"),p(k,"stroke","#3e3e3e"),p(k,"stroke-width","2"),p(k,"stroke-dasharray","44,22"),p(g,"viewBox","0 0 240 1"),p(g,"xmlns","http://www.w3.org/2000/svg"),p(g,"class","svelte-rkwckj"),p($,"class","otp-input-wrapper mx-auto mb-5 max-w-max svelte-rkwckj"),p(w,"class","mb-2 text-sm"),p(x,"class","mb-5 text-sm"),p(_,"class","mb-8 flex flex-col text-center")},m(D,F){M(D,e,F),o(e,t),o(t,r),o(r,a),o(t,n),o(t,s),o(s,c),o(c,d),o(s,y),o(s,u),o(u,m),o(e,V),o(e,_),o(_,$),o($,E),de(E,l[3]),o($,v),o($,g),o(g,k),o(_,R),o(_,w),o(w,b),o(_,h),o(_,x),L.m(x,null),o(_,A),Q(i,_,null),O=!0,E.focus(),C||(I=[K(u,"click",l[12]),K(E,"input",l[13]),K(E,"input",l[9]),K(E,"keypress",We),K(_,"submit",ye(l[7]))],C=!0)},p(D,[F]){(!O||F&1)&&ee(d,D[0]),F&8&&E.value!==D[3]&&de(E,D[3]),G===(G=z(D))&&L?L.p(D,F):(L.d(1),L=G(D),L&&(L.c(),L.m(x,null)));const H={};F&2&&(H.loading=D[1]),F&262144&&(H.$$scope={dirty:F,ctx:D}),i.$set(H)},i(D){O||(q(i.$$.fragment,D),O=!0)},o(D){U(i.$$.fragment,D),O=!1},d(D){D&&f(e),L.d(),Z(i),C=!1,Pe(I)}}}function We(l){if(l.target.value.length==4)return!1}function Je(l,e,t){let r,a,n;const s=ke();let{phone:c,resendAfter:d,loading:y}=e,u,m=Be(d);Oe(l,m,b=>t(11,n=b)),setInterval(()=>{n>0&&Ne(m,n--,n)},1e3);let V="",_="",$="",E="";function v(){t(3,u=V+_+$+E),u.length===4&&s("verifyOtp",u)}function g(){V="",_="",$="",E="",t(3,u=V+_+$+E),s("resend",c)}function k(b){var h;if(((h=b.target.value)==null?void 0:h.length)===4)s("verifyOtp",b.target.value);else return}const R=()=>s("changeNumber");function w(){u=this.value,t(3,u)}return l.$$set=b=>{"phone"in b&&t(0,c=b.phone),"resendAfter"in b&&t(10,d=b.resendAfter),"loading"in b&&t(1,y=b.loading)},l.$$.update=()=>{l.$$.dirty&2048&&t(2,r=Math.floor(n/60)),l.$$.dirty&2052&&t(4,a=Math.floor(n-r*60))},[c,y,r,u,a,s,m,v,g,k,d,n,R,w]}class Qe extends se{constructor(e){super(),le(this,e,Je,Ke,ae,{phone:0,resendAfter:10,loading:1})}}function Ze(l){let e;return{c(){e=X("SEND OTP")},l(t){e=S(t,"SEND OTP")},m(t,r){M(t,e,r)},d(t){t&&f(e)}}}function et(l){let e,t,r,a,n,s,c,d,y,u,m,V,_,$,E,v,g,k,R;function w(h){l[6](h)}let b={type:"tel",label:"Mobile Number",class:"mb-1 w-full",required:!0};return l[0]!==void 0&&(b.value=l[0]),u=new Ce({props:b}),l[5](u),Ee.push(()=>Te(u,"value",w)),v=new we({props:{loading:l[2],class:"w-full",type:"submit",$$slots:{default:[Ze]},$$scope:{ctx:l}}}),{c(){e=N("div"),t=N("h6"),r=X("Please Enter Mobile Number"),a=j(),n=N("form"),s=N("div"),c=N("span"),d=X("+91"),y=j(),W(u.$$.fragment),V=j(),_=N("p"),$=X("Ex. 9XXXXXXXXX"),E=j(),W(v.$$.fragment),this.h()},l(h){e=T(h,"DIV",{});var x=P(e);t=T(x,"H6",{class:!0});var A=P(t);r=S(A,"Please Enter Mobile Number"),A.forEach(f),a=B(x),n=T(x,"FORM",{class:!0});var i=P(n);s=T(i,"DIV",{class:!0});var O=P(s);c=T(O,"SPAN",{class:!0});var C=P(c);d=S(C,"+91"),C.forEach(f),y=B(O),J(u.$$.fragment,O),O.forEach(f),V=B(i),_=T(i,"P",{class:!0});var I=P(_);$=S(I,"Ex. 9XXXXXXXXX"),I.forEach(f),E=B(i),J(v.$$.fragment,i),i.forEach(f),x.forEach(f),this.h()},h(){p(t,"class","mb-3 text-center text-gray-600"),p(c,"class","text-sm"),p(s,"class","flex items-baseline gap-1"),p(_,"class","mb-5 text-sm font-light text-gray-500"),p(n,"class","mb-8")},m(h,x){M(h,e,x),o(e,t),o(t,r),o(e,a),o(e,n),o(n,s),o(s,c),o(c,d),o(s,y),Q(u,s,null),o(n,V),o(n,_),o(_,$),o(n,E),Q(v,n,null),g=!0,k||(R=K(n,"submit",ye(l[7])),k=!0)},p(h,[x]){const A={};!m&&x&1&&(m=!0,A.value=h[0],xe(()=>m=!1)),u.$set(A);const i={};x&4&&(i.loading=h[2]),x&256&&(i.$$scope={dirty:x,ctx:h}),v.$set(i)},i(h){g||(q(u.$$.fragment,h),q(v.$$.fragment,h),g=!0)},o(h){U(u.$$.fragment,h),U(v.$$.fragment,h),g=!1},d(h){h&&f(e),l[5](null),Z(u),Z(v),k=!1,R()}}}function tt(l,e,t){const r=ke();let{phone:a,loading:n,store:s}=e,{ref:c=null}=e;function d(m){Ee[m?"unshift":"push"](()=>{c=m,t(1,c)})}function y(m){a=m,t(0,a)}const u=()=>r("send",a);return l.$$set=m=>{"phone"in m&&t(0,a=m.phone),"loading"in m&&t(2,n=m.loading),"store"in m&&t(4,s=m.store),"ref"in m&&t(1,c=m.ref)},[a,c,n,r,s,d,y,u]}class rt extends se{constructor(e){super(),le(this,e,tt,et,ae,{phone:0,loading:2,store:4,ref:1})}}function nt(l){var a;let e,t=((a=l[0].store)==null?void 0:a.websiteName)+"",r;return{c(){e=N("h1"),r=X(t),this.h()},l(n){e=T(n,"H1",{class:!0});var s=P(e);r=S(s,t),s.forEach(f),this.h()},h(){p(e,"class","bg-gradient-to-br from-secondary-500 to-primary-500 bg-clip-text text-4xl font-extrabold text-transparent")},m(n,s){M(n,e,s),o(e,r)},p(n,s){var c;s&1&&t!==(t=((c=n[0].store)==null?void 0:c.websiteName)+"")&&ee(r,t)},i:ne,o:ne,d(n){n&&f(e)}}}function st(l){var a,n;let e,t,r;return t=new Ie({props:{src:(a=l[0].store)==null?void 0:a.logo,alt:((n=l[0].store)==null?void 0:n.name)+" logo",height:"40",class:"h-10 w-auto flex-shrink-0 object-contain object-center"}}),{c(){e=N("div"),W(t.$$.fragment)},l(s){e=T(s,"DIV",{});var c=P(e);J(t.$$.fragment,c),c.forEach(f)},m(s,c){M(s,e,c),Q(t,e,null),r=!0},p(s,c){var y,u;const d={};c&1&&(d.src=(y=s[0].store)==null?void 0:y.logo),c&1&&(d.alt=((u=s[0].store)==null?void 0:u.name)+" logo"),t.$set(d)},i(s){r||(q(t.$$.fragment,s),r=!0)},o(s){U(t.$$.fragment,s),r=!1},d(s){s&&f(e),Z(t)}}}function lt(l){let e,t;return e=new Qe({props:{loading:l[2],phone:l[1],resendAfter:l[4]}}),e.$on("verifyOtp",l[10]),e.$on("resend",l[11]),e.$on("changeNumber",l[8]),{c(){W(e.$$.fragment)},l(r){J(e.$$.fragment,r)},m(r,a){Q(e,r,a),t=!0},p(r,a){const n={};a&4&&(n.loading=r[2]),a&2&&(n.phone=r[1]),a&16&&(n.resendAfter=r[4]),e.$set(n)},i(r){t||(q(e.$$.fragment,r),t=!0)},o(r){U(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function at(l){let e,t;return e=new rt({props:{loading:l[2],phone:l[1]}}),e.$on("send",l[9]),{c(){W(e.$$.fragment)},l(r){J(e.$$.fragment,r)},m(r,a){Q(e,r,a),t=!0},p(r,a){const n={};a&4&&(n.loading=r[2]),a&2&&(n.phone=r[1]),e.$set(n)},i(r){t||(q(e.$$.fragment,r),t=!0)},o(r){U(e.$$.fragment,r),t=!1},d(r){Z(e,r)}}}function ot(l){let e,t,r,a,n,s,c,d,y,u,m,V,_,$,E,v;const g=[l[5]];let k={};for(let i=0;i<g.length;i+=1)k=$e(k,g[i]);e=new Ae({props:k});const R=[st,nt],w=[];function b(i,O){var C,I;return(C=i[0].store)!=null&&C.logo?0:(I=i[0].store)!=null&&I.websiteName?1:-1}~(n=b(l))&&(s=w[n]=R[n](l));const h=[at,lt],x=[];function A(i,O){return i[3]?1:0}return d=A(l),y=x[d]=h[d](l),{c(){W(e.$$.fragment),t=j(),r=N("div"),a=N("a"),s&&s.c(),c=j(),y.c(),u=j(),m=N("p"),V=X(`By clicking send OTP you are accepting our
		`),_=N("a"),$=N("b"),E=X("Terms & Conditions"),this.h()},l(i){J(e.$$.fragment,i),t=B(i),r=T(i,"DIV",{class:!0,style:!0});var O=P(r);a=T(O,"A",{href:!0,"aria-label":!0,class:!0,"sveltekit:prefetch":!0});var C=P(a);s&&s.l(C),C.forEach(f),c=B(O),y.l(O),u=B(O),m=T(O,"P",{class:!0});var I=P(m);V=S(I,`By clicking send OTP you are accepting our
		`),_=T(I,"A",{href:!0,"aria-label":!0,target:!0,rel:!0,class:!0});var z=P(_);$=T(z,"B",{});var G=P($);E=S(G,"Terms & Conditions"),G.forEach(f),z.forEach(f),I.forEach(f),O.forEach(f),this.h()},h(){p(a,"href","/"),p(a,"aria-label","Click to route home"),p(a,"class","mx-auto mb-5 max-w-max"),p(a,"sveltekit:prefetch",""),p(_,"href","/p/terms"),p(_,"aria-label","Click to route terms & conditions"),p(_,"target","_blank"),p(_,"rel","noopener noreferrer"),p(_,"class","link whitespace-nowrap"),p(m,"class","text-center text-sm text-gray-500"),p(r,"class","frosted container mx-auto flex w-full max-w-sm flex-col rounded-2xl border bg-cover bg-center bg-no-repeat px-4 py-10 shadow-2xl sm:px-8 svelte-vbphe6"),De(r,"background-image","url('/login/bg-lighter.svg')")},m(i,O){Q(e,i,O),M(i,t,O),M(i,r,O),o(r,a),~n&&w[n].m(a,null),o(r,c),x[d].m(r,null),o(r,u),o(r,m),o(m,V),o(m,_),o(_,$),o($,E),v=!0},p(i,[O]){const C=O&32?Xe(g,[Se(i[5])]):{};e.$set(C);let I=n;n=b(i),n===I?~n&&w[n].p(i,O):(s&&(ge(),U(w[I],1,1,()=>{w[I]=null}),he()),~n?(s=w[n],s?s.p(i,O):(s=w[n]=R[n](i),s.c()),q(s,1),s.m(a,null)):s=null);let z=d;d=A(i),d===z?x[d].p(i,O):(ge(),U(x[z],1,1,()=>{x[z]=null}),he(),y=x[d],y?y.p(i,O):(y=x[d]=h[d](i),y.c()),q(y,1),y.m(r,u))},i(i){v||(q(e.$$.fragment,i),q(s),q(y),v=!0)},o(i){U(e.$$.fragment,i),U(s),U(y),v=!1},d(i){Z(e,i),i&&f(t),i&&f(r),~n&&w[n].d(),x[d].d()}}}function it(l,e,t){const r=Me();let{data:a}=e;const n={title:"OTP Login",description:"OTP Login"};Ve(async()=>{});let s,c=!1,d=!1,y=0;async function u({detail:v}){t(1,s=v);try{t(2,c=!0);const g=await ve("get-otp",{phone:s});t(4,y=g==null?void 0:g.timer),t(3,d=!0)}catch(g){be(g,"error")}finally{t(2,c=!1)}}async function m({detail:v}){try{t(2,c=!0);const k=await ve("verify-otp",{phone:s,otp:v}),R={email:k.email,phone:k.phone,firstName:k.firstName,lastName:k.lastName,avatar:k.avatar,role:k.role,verified:k.verified,active:k.active};await r.set("me",R,{path:"/"}),await Re();let w=k.ref||"/";Fe&&je(w)}catch(g){be(g,"error")}finally{t(2,c=!1)}}function V(){t(1,s=""),t(3,d=!1)}const _=({detail:v})=>u({detail:v}),$=({detail:v})=>m({detail:v}),E=({detail:v})=>u({detail:v});return l.$$set=v=>{"data"in v&&t(0,a=v.data)},[a,s,c,d,y,n,u,m,V,_,$,E]}class vt extends se{constructor(e){super(),le(this,e,it,ot,ae,{data:0})}}export{vt as default};
